(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50db11be"],{"63aa":function(e,t,a){},"65fb":function(e,t,a){"use strict";var r=a("8a2b"),s=a.n(r);s.a},"8a2b":function(e,t,a){},b02b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("common-layout",[r("div",{staticClass:"top"},[r("div",{staticClass:"header"},[r("img",{staticClass:"logo",attrs:{alt:"logo",src:a("5d2c")}}),r("span",{staticClass:"title"},[e._v(e._s(e.systemName))])]),r("div",{staticClass:"desc"})]),r("div",{staticClass:"logon"},[r("a-card",{staticStyle:{width:"450px"}},[r("a-form",{attrs:{form:e.form},on:{submit:e.onSubmit}},[r("a-tabs",{staticStyle:{padding:"0 2px"},attrs:{size:"large",tabBarStyle:{textAlign:"center"}},model:{value:e.tabsKey,callback:function(t){e.tabsKey=t},expression:"tabsKey"}},[r("a-tab-pane",{key:"1",attrs:{tab:"学生注册"}},[r("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"学号不能为空",whitespace:!0}]}],expression:"['name', {rules: [{ required: true, message: '学号不能为空', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"学号"}},[r("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"密码不能为空",whitespace:!0}]}],expression:"['password', {rules: [{ required: true, message: '密码不能为空', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"密码",autocomplete:"autocomplete",type:"password"}},[r("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1),r("a-tab-pane",{key:"2",attrs:{tab:"教工注册"}},[r("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"账号不能为空",whitespace:!0}]}],expression:"['name', {rules: [{ required: true, message: '账号不能为空', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"账号"}},[r("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"密码不能为空",whitespace:!0}]}],expression:"['password', {rules: [{ required: true, message: '密码不能为空', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"密码",autocomplete:"autocomplete",type:"password"}},[r("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1)],1),r("a-form-item",[r("a-button",{staticStyle:{width:"100%"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"}},[e._v(" 注册 ")])],1),r("div",[r("router-link",{attrs:{to:"/login"}},[r("a",{staticStyle:{float:"right"}},[e._v("登录")])])],1)],1)],1)],1)])},s=[],o=a("5530"),i=a("d808"),n=a("7ded"),c=a("5880"),l={name:"Logon",components:{CommonLayout:i["a"]},data:function(){return{logging:!1,error:"",tabsKey:"1",userType:"STUDENT",form:this.$form.createForm(this)}},watch:{tabsKey:function(e){this.userType="1"===e?"STUDENT":"2"===e?"TEACHER":null}},computed:{systemName:function(){return this.$store.state.setting.systemName}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["mapMutations"])("account",["setToken","setUser","setPermissions","setRoles"])),Object(c["mapActions"])("account",["getCurrentUserInfo"])),Object(c["mapActions"])("mapping",["getMap"])),{},{onSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e){if(!e){t.logging=!0;var a=t.form.getFieldValue("name"),r=t.form.getFieldValue("password"),s=t.userType;Object(n["d"])({userName:a,password:r,type:s}).then((function(){Object(n["login"])({userName:a,password:r}).then((function(e){var a=e.code,r=e.msg,s=e.data;if(t.logging=!1,200===a){var o=s.token;t.setToken(o),t.getCurrentUserInfo().then((function(){t.getMap().then((function(){t.$nextTick((function(){t.$router.push("/setting")}))}))}))}else t.error=r}))}))}}))}}),created:function(){}},u=l,m=(a("65fb"),a("0c7c")),p=Object(m["a"])(u,r,s,!1,null,"50d86339",null),d=p.exports;t["default"]=d},d808:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-layout"},[a("div",{staticClass:"content"},[e._t("default")],2),a("page-footer",{attrs:{"link-list":e.footerLinks,copyright:e.copyright}})],1)},s=[],o=a("5530"),i=a("613e"),n=a("5880"),c={name:"CommonLayout",components:{PageFooter:i["a"]},computed:Object(o["a"])({},Object(n["mapState"])("setting",["footerLinks","copyright"]))},l=c,u=(a("e7d3"),a("0c7c")),m=Object(u["a"])(l,r,s,!1,null,"7dbf5c1a",null);t["a"]=m.exports},e7d3:function(e,t,a){"use strict";var r=a("63aa"),s=a.n(r);s.a}}]);